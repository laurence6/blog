---
layout: post
title: 新笔记本 debian 配置
category: "计算机"
tags: ["linux"]
image: http://ww2.sinaimg.cn/mw690/bf2cf099jw1e7uhczmr2cj209709qq38.jpg
---
<p>好久没更新了，大家好。2014 年的前四个月都没有写东西了，简单地说就是一个字，懒。</p>
<p>今年年初，买了一个新的笔记本。新的笔记本当然就是很新的硬件，本来用的 arch 在新的笔记本上死活安装不了显卡驱动...于是暂时换到 debian sid，然后就一直沿用至今。以前也用过 debian，于是按照以前那样配置系统。基本上装好之后发现有一些东西和在旧的笔记本上不太一样，主要是独显以及声音的配置。</p>
<p>首先是独显，我笔记本上的独显是 ATI Radeon HD 8xxxM，开源驱动还不支持，只能安装官方的闭源驱动催化剂 (Catalyst)。在 debian 上，催化剂驱动叫 fglrx，在官方的源里就有，只需要在源里开启 non-free 目录，然后：</p>
<pre>
# apt-get install fglrx-driver
</pre>
<p>这样就好了。平常用不到独显，所以我会开启节能模式，也能降低一些温度：</p>
<pre>
# aticonfig --px-igpu
</pre>
<p>独显基本上就好了。哦对了，前几天升级内核，重启之后 startx，无法启动，提示无法找到模块 fglrx。尝试运行 dkms，但是 dkms 报错，要求安装 linux-headers，但是检查之后发现已经安装了 linux-headers，这不科学啊。然后我就怀疑是不是 dkms 没有找到目录，于是运行：</p>
<pre>
# dkms autoinstall --kernelsourcedir /etc/kernel/header_postinst.d/
</pre>
<p>就能够正常使用了。但是现在还有一个问题没有解决就是安装催化剂驱动之后，X 启动会很慢，查看日志发现：</p>
<pre>
[    32.696] (WW) fglrx(0): board is an unknown third party board, chipset is supported
[    32.696] Loading extension FGLRXEXTENSION
[    64.828] (II) fglrx(0): Turned off the discrete card
</pre>
<p>这一部分似乎花了很长时间，至今没有解决这个问题。这个问题并不会影响之后的使用，只是会让启动慢一些。也许是驱动的问题？</p>
<p>再说说声音。安装好系统之后，安装了 alsa，但无法正常发出声音。Google 了一下，需要安装一个声音服务器 (sound server) PulseAudio，这是一个后台进程从一个或多个音源 (进程或输入设备) 接受声音输入，然后重定向声音到一个或多个槽 (声卡，远程网络 PulseAudio 服务或其他进程)，安装后就能正常使用了。直到前几天系统升级了一下，发现 debian sid 已经默认使用 systemd，比以前的 sysv 快了一些，但是 PulseAudio 控制界面找不到输出的声卡，然后系统就无法发出声因了。查了很久也没找到原因，昨天又开始查找，终于在 arch 论坛上查到，在使用 systemd 的时候，必须要将当前用户加入 audio 组才能正常使用声音设备。</p>
<p>大概就是这样了。: )</p>
